{"version":3,"names":["ruleComposer","require","eslint","eslintVersion","ESLint","version","noInvalidThisRule","Linter","getRules","get","parseInt","module","exports","filterReports","problem","inClassMember","node","type","key","parent"],"sources":["../../src/rules/no-invalid-this.cjs"],"sourcesContent":["const ruleComposer = require(\"eslint-rule-composer\");\nconst eslint = require(\"eslint\");\nconst eslintVersion = eslint.ESLint.version;\n\nconst noInvalidThisRule = new eslint.Linter().getRules().get(\"no-invalid-this\");\n\nif (parseInt(eslintVersion, 10) >= 8) {\n  // ESLint 8 supports class properties / private methods natively\n  // so we simply forward the original rule\n  module.exports = noInvalidThisRule;\n} else {\n  module.exports = ruleComposer.filterReports(noInvalidThisRule, problem => {\n    let inClassMember = false;\n    let node = problem.node;\n\n    while (node) {\n      if (\n        node.type === \"ClassPrivateMethod\" ||\n        node.type === \"ClassPrivateProperty\" ||\n        node.type === \"ClassProperty\" ||\n        node.type === \"PropertyDefinition\" ||\n        (node.type === \"MethodDefinition\" &&\n          node.key.type === \"PrivateIdentifier\")\n      ) {\n        inClassMember = true;\n        break;\n      } else if (\n        node.type === \"FunctionDeclaration\" ||\n        node.type === \"FunctionExpression\"\n      ) {\n        inClassMember = false;\n        break;\n      }\n\n      node = node.parent;\n    }\n\n    return !inClassMember;\n  });\n}\n"],"mappings":"AAAA,MAAMA,YAAY,GAAGC,OAAO,CAAC,sBAAsB,CAAC;AACpD,MAAMC,MAAM,GAAGD,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAME,aAAa,GAAGD,MAAM,CAACE,MAAM,CAACC,OAAO;AAE3C,MAAMC,iBAAiB,GAAG,IAAIJ,MAAM,CAACK,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAACC,GAAG,CAAC,iBAAiB,CAAC;AAE/E,IAAIC,QAAQ,CAACP,aAAa,EAAE,EAAE,CAAC,IAAI,CAAC,EAAE;EAGpCQ,MAAM,CAACC,OAAO,GAAGN,iBAAiB;AACpC,CAAC,MAAM;EACLK,MAAM,CAACC,OAAO,GAAGZ,YAAY,CAACa,aAAa,CAACP,iBAAiB,EAAEQ,OAAO,IAAI;IACxE,IAAIC,aAAa,GAAG,KAAK;IACzB,IAAIC,IAAI,GAAGF,OAAO,CAACE,IAAI;IAEvB,OAAOA,IAAI,EAAE;MACX,IACEA,IAAI,CAACC,IAAI,KAAK,oBAAoB,IAClCD,IAAI,CAACC,IAAI,KAAK,sBAAsB,IACpCD,IAAI,CAACC,IAAI,KAAK,eAAe,IAC7BD,IAAI,CAACC,IAAI,KAAK,oBAAoB,IACjCD,IAAI,CAACC,IAAI,KAAK,kBAAkB,IAC/BD,IAAI,CAACE,GAAG,CAACD,IAAI,KAAK,mBAAoB,EACxC;QACAF,aAAa,GAAG,IAAI;QACpB;MACF,CAAC,MAAM,IACLC,IAAI,CAACC,IAAI,KAAK,qBAAqB,IACnCD,IAAI,CAACC,IAAI,KAAK,oBAAoB,EAClC;QACAF,aAAa,GAAG,KAAK;QACrB;MACF;MAEAC,IAAI,GAAGA,IAAI,CAACG,MAAM;IACpB;IAEA,OAAO,CAACJ,aAAa;EACvB,CAAC,CAAC;AACJ"}